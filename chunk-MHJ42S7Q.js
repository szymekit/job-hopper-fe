import{a as T}from"./chunk-GDX5ZT5J.js";import{a as k}from"./chunk-LIPKMQYY.js";import{a as N,c as v}from"./chunk-G6XE52Q4.js";import{d as j}from"./chunk-WDPLDZXG.js";import{x as E,y as I}from"./chunk-T3VJ5NW5.js";import{$ as c,A as d,Ea as o,Eb as w,Fb as r,Gb as f,Hb as u,Qb as M,Ra as A,S as g,W as m,ab as C,cb as y,fb as S,gb as D,hb as O,ib as n,jb as i,m as s,na as _,rb as l,uc as z}from"./chunk-6R5FC44M.js";var b=class e{http=c(z);baseUrl=N;getMyApplications(){return this.http.get(`${this.baseUrl}${v.applications.getMyApplications}`)}getByJobOffer(a){return this.http.get(`${this.baseUrl}${v.applications.getByJobOffer(a)}`)}updateStatus(a,t){return this.http.patch(`${this.baseUrl}${v.applications.updateStatus(a)}`,t)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})};var h=class e{applicationsApi=c(b);notifications=c(k);loading=_(!1);error=_(null);applications=_([]);loadMyApplications(){this.loading.set(!0),this.error.set(null),this.applicationsApi.getMyApplications().pipe(g(a=>{this.applications.set(a)}),d(a=>(this.error.set("Nie uda\u0142o si\u0119 za\u0142adowa\u0107 aplikacji."),s([])))).subscribe(()=>{this.loading.set(!1)})}loadByJobOffer(a){this.loading.set(!0),this.error.set(null),this.applicationsApi.getByJobOffer(a).pipe(g(t=>{this.applications.set(t)}),d(t=>(this.error.set("Nie uda\u0142o si\u0119 za\u0142adowa\u0107 aplikacji."),s([])))).subscribe(()=>{this.loading.set(!1)})}updateStatus(a,t){this.applicationsApi.updateStatus(a,t).pipe(g(p=>{this.applications.update(x=>x.map(P=>P.id===a?p:P)),this.notifications.showSuccess("Status aplikacji zosta\u0142 zaktualizowany.")}),d(p=>{let x=T(p);return this.notifications.showError(x,{title:"Nie uda\u0142o si\u0119 zaktualizowa\u0107 statusu aplikacji"}),s({})})).subscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})};var U=e=>["/app/offers",e],F=(e,a)=>a.id;function B(e,a){e&1&&(n(0,"div",3),r(1,"\u0141adowanie..."),i())}function J(e,a){if(e&1&&(n(0,"div",4),r(1),i()),e&2){let t=l();o(),f(t.error())}}function R(e,a){e&1&&(n(0,"div",5)(1,"mat-icon"),r(2,"description"),i(),n(3,"p"),r(4,"Nie masz jeszcze \u017Cadnych aplikacji."),i()())}function Z(e,a){if(e&1&&(n(0,"div",13),r(1),i()),e&2){let t=l().$implicit;o(),u(" Match score: ",t.matchScore,"% ")}}function G(e,a){if(e&1&&(n(0,"div",7)(1,"div",8)(2,"h3",9)(3,"a",10),r(4),i()(),n(5,"span",11),r(6),i()(),n(7,"p",12),r(8),i(),C(9,Z,2,1,"div",13),n(10,"div",14)(11,"span",15),r(12),i(),n(13,"a",16),r(14," Zobacz ofert\u0119 "),i()()()),e&2){let t=a.$implicit,p=l(2);o(3),O("routerLink",M(9,U,t.jobOfferId)),o(),f(t.jobOffer==null?null:t.jobOffer.title),o(),w("applications-page__card-status--"+t.status.toLowerCase()),o(),u(" ",p.getStatusLabel(t.status)," "),o(2),f(t.jobOffer==null||t.jobOffer.company==null?null:t.jobOffer.company.name),o(),y(t.matchScore?9:-1),o(3),u(" Z\u0142o\u017Cono: ",p.formatDate(t.createdAt)," "),o(),O("routerLink",M(11,U,t.jobOfferId))}}function H(e,a){if(e&1&&(n(0,"div",6),S(1,G,15,13,"div",7,F),i()),e&2){let t=l();o(),D(t.applications())}}var $=class e{facade=c(h);loading=this.facade.loading;error=this.facade.error;applications=this.facade.applications;ngOnInit(){this.facade.loadMyApplications()}getStatusLabel(a){return{PENDING:"Oczekuje",REVIEWED:"Przejrzana",ACCEPTED:"Zaakceptowana",REJECTED:"Odrzucona"}[a]||a}formatDate(a){return a?new Date(a).toLocaleDateString("pl-PL"):""}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=A({type:e,selectors:[["jh-applications-page"]],decls:8,vars:1,consts:[[1,"applications-page"],[1,"applications-page__header"],[1,"applications-page__title"],[1,"applications-page__loading"],[1,"applications-page__error"],[1,"applications-page__empty"],[1,"applications-page__list"],[1,"applications-page__card"],[1,"applications-page__card-header"],[1,"applications-page__card-title"],[3,"routerLink"],[1,"applications-page__card-status"],[1,"applications-page__card-company"],[1,"applications-page__card-match-score"],[1,"applications-page__card-footer"],[1,"applications-page__card-date"],[1,"applications-page__card-link",3,"routerLink"]],template:function(t,p){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Moje aplikacje"),i()(),C(4,B,2,0,"div",3)(5,J,2,1,"div",4)(6,R,5,0,"div",5)(7,H,3,0,"div",6),i()),t&2&&(o(4),y(p.loading()?4:p.error()?5:p.applications().length===0?6:7))},dependencies:[j,I,E],styles:[".applications-page[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--color-bg-secondary);padding:var(--spacing-4xl)}.applications-page__header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-4xl)}.applications-page__title[_ngcontent-%COMP%]{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);color:var(--color-text-primary);margin:0}.applications-page__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xl)}.applications-page__card[_ngcontent-%COMP%]{background-color:var(--color-bg-primary);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);padding:var(--spacing-3xl)}.applications-page__card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--spacing-md)}.applications-page__card-title[_ngcontent-%COMP%]{font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0}.applications-page__card-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.applications-page__card-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-btn-secondary)}.applications-page__card-status[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-md);border-radius:var(--radius-md);font-size:var(--font-size-xs);font-weight:var(--font-weight-semibold);text-transform:uppercase}.applications-page__card-status--pending[_ngcontent-%COMP%]{background-color:var(--color-badge-yellow-bg);color:var(--color-badge-yellow-text)}.applications-page__card-status--reviewed[_ngcontent-%COMP%], .applications-page__card-status--accepted[_ngcontent-%COMP%]{background-color:var(--color-badge-green-bg);color:var(--color-badge-green-text)}.applications-page__card-status--rejected[_ngcontent-%COMP%]{background-color:var(--color-badge-red-bg);color:var(--color-badge-red-text)}.applications-page__card-company[_ngcontent-%COMP%]{font-size:var(--font-size-base);color:var(--color-text-secondary);margin:0 0 var(--spacing-md)}.applications-page__card-match-score[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-text-muted);margin-bottom:var(--spacing-md)}.applications-page__card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--spacing-md);border-top:var(--border-width-thin) solid var(--color-border-default)}.applications-page__card-date[_ngcontent-%COMP%]{font-size:var(--font-size-sm);color:var(--color-text-muted)}.applications-page__card-link[_ngcontent-%COMP%]{color:var(--color-btn-secondary);text-decoration:none;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium)}.applications-page__card-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.applications-page__loading[_ngcontent-%COMP%], .applications-page__error[_ngcontent-%COMP%], .applications-page__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-8xl);color:var(--color-text-secondary)}@media (max-width: 419px){.applications-page[_ngcontent-%COMP%]{padding:var(--spacing-2xl)}.applications-page__card-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}}"],changeDetection:0})};export{$ as ApplicationsPageComponent};
