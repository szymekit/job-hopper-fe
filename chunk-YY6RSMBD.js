import{a as X,b as et,c as ot}from"./chunk-VEUQTQFU.js";import{a as K,b as Q}from"./chunk-AIFCY5AN.js";import{a as I}from"./chunk-PU44R6CB.js";import{a as tt}from"./chunk-F45LC4RS.js";import"./chunk-3RK6DDJD.js";import{a as Z,b as H,c as J,d as W,e as $,f as Y}from"./chunk-3OHHDDBN.js";import{b as B,d as u,f as U,g as D,k as T,m as R,n as G,p as V,q}from"./chunk-2QYDXULY.js";import{a as z}from"./chunk-FT2GGG6N.js";import{j as L,k as F}from"./chunk-PD4IKBLU.js";import{a as A}from"./chunk-GDX5ZT5J.js";import{a as N}from"./chunk-LIPKMQYY.js";import"./chunk-G6XE52Q4.js";import{c as O}from"./chunk-WDPLDZXG.js";import{x as j,y as k}from"./chunk-T3VJ5NW5.js";import{$ as a,A as y,Ea as l,Fb as i,Gb as x,Ra as P,S as C,W as w,Yb as b,a as d,ab as g,b as p,cb as _,hb as v,ib as e,jb as o,kb as c,m as M,na as S,qb as E,rb as h}from"./chunk-6R5FC44M.js";var f=class r{formBuilder=a(V);authApi=a(tt);authService=a(z);realtimeService=a(I);router=a(O);notifications=a(N);form=this.formBuilder.nonNullable.group({email:this.formBuilder.nonNullable.control("",{validators:[u.required,u.email]}),password:this.formBuilder.nonNullable.control("",{validators:[u.required]}),rememberMe:this.formBuilder.nonNullable.control(!1)});uiState=S({submitting:!1,submitError:null});submit(){if(!this.form.valid||this.uiState().submitting){this.form.markAllAsTouched();return}let m=this.form.getRawValue();this.uiState.update(t=>p(d({},t),{submitting:!0,submitError:null})),this.authApi.login({email:m.email,password:m.password}).pipe(C(t=>{this.authService.setToken(t.accessToken),this.authService.setUser(t.user),this.realtimeService.connect(),this.uiState.update(rt=>p(d({},rt),{submitting:!1,submitError:null}));let n=t.user.fullName||t.user.email;this.notifications.showSuccess(`Witaj ponownie${n?`, ${n}`:""}!`);let s=this.router.parseUrl(this.router.url).queryParams.returnUrl;s?this.router.navigateByUrl(s):t.user.role==="EMPLOYEE"?this.router.navigate(["/app/dashboard"]):t.user.role==="RECRUITER"?this.router.navigate(["/app/company/dashboard"]):this.router.navigate(["/app/dashboard"])}),y(t=>{let n=A(t);return this.uiState.update(s=>p(d({},s),{submitting:!1,submitError:n})),this.notifications.showError(n,{title:"B\u0142\u0105d logowania"}),M(null)})).subscribe()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};function at(r,m){if(r&1&&(e(0,"mat-error"),i(1),o()),r&2){let t=h();l(),x(t.emailError())}}function mt(r,m){if(r&1&&(e(0,"mat-error"),i(1),o()),r&2){let t=h();l(),x(t.passwordError())}}var it=class r{facade=a(f);form=this.facade.form;uiState=this.facade.uiState;emailError=b(()=>et(this.form.controls.email));passwordError=b(()=>ot(this.form.controls.password));handleSubmit(){this.facade.submit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=P({type:r,selectors:[["jh-login-page"]],decls:50,vars:4,consts:[["heading",""],["auth-left","",1,"promo"],[1,"promo__logo-row"],["src","/assets/logo.svg","alt","JobHopper",1,"promo__logo-image"],[1,"promo__title"],[1,"promo__subtitle"],[1,"promo__items"],[1,"promo__item"],[1,"promo__item-icon"],[1,"promo__item-text"],[1,"promo__item-title"],[1,"promo__item-description"],["auth-right","",1,"form"],[1,"form__title"],[1,"form__body",3,"ngSubmit","formGroup"],["appearance","outline","floatLabel","always","hideRequiredMarker","true",1,"form__field"],["matInput","","placeholder","Uzupe\u0142nij","formControlName","email","type","email"],["matInput","","placeholder","Uzupe\u0142nij","formControlName","password","type","password"],[1,"form__checkbox-group"],["color","primary","formControlName","rememberMe"],["mat-raised-button","","color","primary","type","submit",1,"form__submit",3,"disabled"],[1,"form__footer"],["href","/register/employee",1,"form__footer-link"]],template:function(t,n){t&1&&(e(0,"jh-auth-page-layout",0)(1,"div",1)(2,"div",2),c(3,"img",3),o(),e(4,"h1",4),i(5,"Witaj ponownie"),o(),e(6,"p",5),i(7," Zaloguj si\u0119, aby kontynuowa\u0107 korzystanie z JobHopper. "),o(),e(8,"ul",6)(9,"li",7)(10,"div",8)(11,"mat-icon"),i(12,"work"),o()(),e(13,"div",9)(14,"div",10),i(15,"Znajd\u017A idealn\u0105 prac\u0119"),o(),e(16,"div",11),i(17," Przegl\u0105daj oferty dopasowane do Twojego do\u015Bwiadczenia. "),o()()(),e(18,"li",7)(19,"div",8)(20,"mat-icon"),i(21,"notifications"),o()(),e(22,"div",9)(23,"div",10),i(24,"Otrzymuj powiadomienia"),o(),e(25,"div",11),i(26," B\u0105d\u017A na bie\u017C\u0105co z najnowszymi ofertami pracy. "),o()()()()(),e(27,"div",12)(28,"h2",13),i(29,"Logowanie"),o(),e(30,"form",14),E("ngSubmit",function(){return n.handleSubmit()}),e(31,"mat-form-field",15)(32,"mat-label"),i(33,"Adres e-mail"),o(),c(34,"input",16),g(35,at,2,1,"mat-error"),o(),e(36,"mat-form-field",15)(37,"mat-label"),i(38,"Has\u0142o"),o(),c(39,"input",17),g(40,mt,2,1,"mat-error"),o(),e(41,"div",18)(42,"mat-checkbox",19),i(43," Zapami\u0119taj mnie na tym urz\u0105dzeniu "),o()(),e(44,"button",20),i(45," Zaloguj si\u0119 "),o()(),e(46,"p",21),i(47," Nie masz jeszcze konta? "),e(48,"a",22),i(49,"Utw\xF3rz konto"),o()()()()),t&2&&(l(30),v("formGroup",n.form),l(5),_(n.emailError()?35:-1),l(5),_(n.passwordError()?40:-1),l(4),v("disabled",!n.form.valid||n.uiState().submitting))},dependencies:[X,q,T,B,U,D,R,G,W,J,Z,H,Y,$,Q,K,F,L,k,j],styles:[".promo[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.promo__logo-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:var(--spacing-4xl)}.promo__logo-image[_ngcontent-%COMP%]{height:40px;width:auto}.promo__title[_ngcontent-%COMP%]{margin:0 0 var(--spacing-md);font-size:26px;font-weight:var(--font-weight-semibold);color:var(--color-text-primary)}.promo__subtitle[_ngcontent-%COMP%]{margin:0 0 var(--spacing-4xl);color:var(--color-text-muted);font-size:var(--font-size-md);max-width:360px}.promo__items[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--spacing-xl)}.promo__item[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xl)}.promo__item-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:var(--radius-md);background-color:var(--color-btn-secondary);display:flex;align-items:center;justify-content:center;color:var(--color-border-default)}.promo__item-text[_ngcontent-%COMP%]{flex:1}.promo__item-title[_ngcontent-%COMP%]{font-size:var(--font-size-base);font-weight:var(--font-weight-medium);margin-bottom:var(--spacing-xs);color:var(--color-text-primary)}.promo__item-description[_ngcontent-%COMP%]{font-size:var(--font-size-md);color:var(--color-text-muted);line-height:var(--line-height-relaxed)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form__title[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xl);font-size:26px;font-weight:var(--font-weight-semibold);color:var(--color-text-primary)}.form__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xl)}.form__field[_ngcontent-%COMP%]{width:100%}.form__field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-radius:var(--radius-md);background-color:var(--color-bg-primary)}.form__field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%], .form__field[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{padding-inline:var(--spacing-2xl)}.form__checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);margin-top:var(--spacing-md)}.form__submit[_ngcontent-%COMP%]{margin-top:var(--spacing-xl);height:44px;border-radius:var(--radius-md);font-weight:var(--font-weight-medium)}.form__footer[_ngcontent-%COMP%]{margin-top:var(--spacing-xl);margin-bottom:0;font-size:var(--font-size-md);color:var(--color-text-muted);text-align:center}.form__footer-link[_ngcontent-%COMP%]{color:var(--color-btn-secondary);text-decoration:none;font-weight:var(--font-weight-medium)}.form__footer-link[_ngcontent-%COMP%]:hover{color:var(--color-btn-secondary-hover);text-decoration:underline}@media (max-width: 767px){.promo[_ngcontent-%COMP%]{gap:var(--spacing-3xl)}.promo__logo-row[_ngcontent-%COMP%]{margin-bottom:var(--spacing-3xl)}.promo__title[_ngcontent-%COMP%]{font-size:var(--font-size-3xl)}.promo__subtitle[_ngcontent-%COMP%]{margin-bottom:var(--spacing-3xl);max-width:100%}.form[_ngcontent-%COMP%]{padding-top:var(--spacing-xl)}.form__title[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}}@media (max-width: 420px){.promo__title[_ngcontent-%COMP%]{font-size:var(--font-size-2xl)}.form__title[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}}"],changeDetection:0})};export{it as LoginPageComponent};
